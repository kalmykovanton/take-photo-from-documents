{"version":3,"sources":["AppCamera.js","AppButton.js","AppImage.js","App.js","index.js"],"names":["AppCamera","_ref","onTakePhoto","onCameraStart","react_default","a","createElement","className","id","build_default","idealFacingMode","FACING_MODES","ENVIRONMENT","isImageMirror","AppButton","title","onClick","AppImage","src","width","alt","SMALL_RECT_STATUS_NAME","WIDE_RECT_STATUS_NAME","SMALL_HEIGHT_MULTER","WIDE_HEIGHT_MULTER","WEIGHT_MULTER","RESIZE_BUTTON_SIZE","App","state","croppedPhoto","timestamp","videoRef","rectWidth","rectHeight","rectX","rectY","rectHeightMulter","rectWidthMulter","rectStatus","initCamera","_this$state","_this","resizeButton","document","getElementById","video","querySelector","videoOffsetWidth","offsetWidth","videoOffsetHeight","offsetHeight","smallResizeButtonTop","window","innerHeight","smallResizeButtonLeft","innerWidth","largeResizeButtonTop","largeResizeButtonLeft","setAttribute","concat","canvasOverlay","height","ctx","getContext","lineWidth","strokeStyle","strokeRect","setState","setTimeout","cropImage","img","newWidth","newHeight","startX","startY","tnCanvas","tnCanvasContext","bufferCanvas","bufferContext","drawImage","toDataURL","dataUri","_this$state2","Image","onload","Date","now","openInNewTab","data","open","write","resizeFrame","_this$state3","this","src_AppCamera","Fragment","style","marginRight","src_AppImage","src_AppButton","Component","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.832e128f.chunk.js","sourcesContent":["import React from \"react\";\nimport Camera, { FACING_MODES } from \"react-html5-camera-photo\";\nimport \"react-html5-camera-photo/build/css/index.css\";\n\nconst AppCamera = ({ onTakePhoto, onCameraStart }) => (\n  <div>\n    <canvas className=\"canvas-overlay\" id=\"canvas-overlay\" />\n    <Camera\n      onTakePhoto={onTakePhoto}\n      onCameraStart={onCameraStart}\n      idealFacingMode={FACING_MODES.ENVIRONMENT}\n      isImageMirror={false}\n    />\n  </div>\n);\n\nexport default AppCamera;\n","import React from \"react\";\n\nconst AppButton = ({ title, onClick }) => (\n  <button onClick={onClick}>{title}</button>\n);\n\nexport default AppButton;\n","import React from \"react\";\n\nconst AppImage = ({ src }) => <img src={src} width=\"250px\" alt=\"\" />;\n\nexport default AppImage;\n","import React, { Component } from \"react\";\n\nimport AppCamera from \"./AppCamera\";\nimport AppButton from \"./AppButton\";\nimport AppImage from \"./AppImage\";\n\nconst SMALL_RECT_STATUS_NAME = \"small\";\nconst WIDE_RECT_STATUS_NAME = \"wide\";\nconst SMALL_HEIGHT_MULTER = 0.3;\nconst WIDE_HEIGHT_MULTER = 0.5;\nconst WEIGHT_MULTER = 0.8;\nconst RESIZE_BUTTON_SIZE = 32;\n\nclass App extends Component {\n  state = {\n    croppedPhoto: \"\",\n    timestamp: \"\",\n    videoRef: null,\n    rectWidth: 0,\n    rectHeight: 0,\n    rectX: 0,\n    rectY: 0,\n    rectHeightMulter: WIDE_HEIGHT_MULTER,\n    rectWidthMulter: WEIGHT_MULTER,\n    rectStatus: WIDE_RECT_STATUS_NAME\n  };\n\n  initCamera = () => {\n    const { rectHeightMulter, rectWidthMulter, rectStatus } = this.state;\n    const resizeButton = document.getElementById(\"resize-button\");\n    const video = document.querySelector(\"video\");\n    const videoOffsetWidth = video.offsetWidth;\n    const videoOffsetHeight = video.offsetHeight;\n\n    // const rate = 2.5 / 3;\n    const rectHeight = videoOffsetHeight * rectHeightMulter;\n    const rectWidth = rectHeight * rectWidthMulter;\n    const rectX = (videoOffsetWidth - rectWidth) / 2;\n    const rectY = (videoOffsetHeight - rectHeight) / 2;\n    const smallResizeButtonTop =\n      window.innerHeight / 2 - rectHeight / 2 - RESIZE_BUTTON_SIZE / 2;\n    const smallResizeButtonLeft =\n      window.innerWidth / 2 + rectWidth / 2 - RESIZE_BUTTON_SIZE / 2;\n    const largeResizeButtonTop =\n      window.innerHeight / 2 - rectHeight / 2 - RESIZE_BUTTON_SIZE;\n    const largeResizeButtonLeft = window.innerWidth / 2 + rectWidth / 2;\n\n    resizeButton.setAttribute(\n      \"style\",\n      `top: ${\n        rectStatus === SMALL_RECT_STATUS_NAME\n          ? smallResizeButtonTop\n          : largeResizeButtonTop\n      }px;\n      left: ${\n        rectStatus === SMALL_RECT_STATUS_NAME\n          ? smallResizeButtonLeft\n          : largeResizeButtonLeft\n      }px;\n      visibility: visible`\n    );\n\n    const canvasOverlay = document.getElementById(\"canvas-overlay\");\n    canvasOverlay.width = videoOffsetWidth;\n    canvasOverlay.height = videoOffsetHeight;\n    const ctx = canvasOverlay.getContext(\"2d\");\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"#fff\";\n    ctx.strokeRect(rectX, rectY, rectWidth, rectHeight);\n\n    this.setState({\n      videoRef: video,\n      rectWidth,\n      rectHeight,\n      rectX,\n      rectY\n    });\n  };\n\n  onCameraStart = setTimeout(this.initCamera, 3000);\n\n  cropImage = (img, newWidth, newHeight, startX, startY) => {\n    const tnCanvas = document.createElement(\"canvas\");\n    const tnCanvasContext = tnCanvas.getContext(\"2d\");\n    tnCanvas.width = newWidth;\n    tnCanvas.height = newHeight;\n\n    const bufferCanvas = document.createElement(\"canvas\");\n    const bufferContext = bufferCanvas.getContext(\"2d\");\n    bufferCanvas.width = img.width;\n    bufferCanvas.height = img.height;\n    bufferContext.drawImage(img, 0, 0, img.width, img.height);\n\n    tnCanvasContext.drawImage(\n      bufferCanvas,\n      startX,\n      startY,\n      newWidth,\n      newHeight,\n      0,\n      0,\n      newWidth,\n      newHeight\n    );\n\n    return tnCanvas.toDataURL();\n  };\n\n  onTakePhoto = dataUri => {\n    const { videoRef, rectWidth, rectHeight, rectX, rectY } = this.state;\n\n    const img = new Image();\n    img.src = dataUri;\n    img.width = videoRef.offsetWidth;\n    img.height = videoRef.offsetHeight;\n    img.onload = () => {\n      const croppedPhoto = this.cropImage(\n        img,\n        rectWidth,\n        rectHeight,\n        rectX,\n        rectY\n      );\n      this.setState({ croppedPhoto: croppedPhoto, timestamp: Date.now() });\n    };\n  };\n\n  openInNewTab = data => () => {\n    const newWindow = window.open();\n    newWindow.document.write(`<img src=\"${data}\">`);\n  };\n\n  resizeFrame = () => {\n    this.setState(\n      ({ rectStatus }) => ({\n        rectHeightMulter:\n          rectStatus === SMALL_RECT_STATUS_NAME\n            ? WIDE_HEIGHT_MULTER\n            : SMALL_HEIGHT_MULTER,\n        rectStatus:\n          rectStatus === SMALL_RECT_STATUS_NAME\n            ? WIDE_RECT_STATUS_NAME\n            : SMALL_RECT_STATUS_NAME\n      }),\n      this.initCamera\n    );\n  };\n\n  render() {\n    const { croppedPhoto, timestamp, rectStatus } = this.state;\n\n    return (\n      <div className=\"app\">\n        <h1 className=\"app-title\">Take Photo From Document</h1>\n        <button\n          id=\"resize-button\"\n          className={`resize-button ${\n            rectStatus === SMALL_RECT_STATUS_NAME\n              ? \"resize-button--wide\"\n              : \"resize-button--small\"\n          }`}\n          onClick={this.resizeFrame}\n        />\n        {!croppedPhoto && (\n          <AppCamera\n            onTakePhoto={this.onTakePhoto}\n            onCameraStart={this.onCameraStart}\n          />\n        )}\n        {croppedPhoto && (\n          <React.Fragment>\n            <div className=\"images-wrapper\">\n              <div\n                className=\"images-wrapper__item\"\n                style={{ marginRight: \"15px\" }}\n              >\n                <AppImage src={croppedPhoto} />\n                <AppButton\n                  title={`cropped_${timestamp}`}\n                  onClick={this.openInNewTab(croppedPhoto)}\n                />\n              </div>\n            </div>\n          </React.Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}