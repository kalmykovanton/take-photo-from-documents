{"version":3,"sources":["AppCamera.js","AppButton.js","AppImage.js","App.js","index.js"],"names":["AppCamera","_ref","onTakePhoto","onCameraStart","react_default","a","createElement","className","id","build_default","AppButton","title","onClick","AppImage","src","width","alt","App","state","croppedPhoto","timestamp","videoRef","rectWidth","rectHeight","rectX","rectY","setTimeout","video","document","querySelector","videoOffsetWidth","offsetWidth","videoOffsetHeight","offsetHeight","canvasOverlay","getElementById","height","ctx","getContext","lineWidth","strokeStyle","strokeRect","_this","setState","cropImage","img","newWidth","newHeight","startX","startY","tnCanvas","tnCanvasContext","bufferCanvas","bufferContext","drawImage","toDataURL","dataUri","_this$state","Image","onload","Date","now","openInNewTab","data","window","open","write","concat","_this$state2","this","src_AppCamera","Fragment","style","marginRight","src_AppImage","src_AppButton","Component","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.6785b28f.chunk.js","sourcesContent":["import React from \"react\";\nimport Camera from \"react-html5-camera-photo\";\nimport \"react-html5-camera-photo/build/css/index.css\";\n\nconst AppCamera = ({ onTakePhoto, onCameraStart }) => (\n  <div>\n    <canvas className=\"canvas-overlay\" id=\"canvas-overlay\" />\n    <Camera onTakePhoto={onTakePhoto} onCameraStart={onCameraStart} />\n  </div>\n);\n\nexport default AppCamera;\n","import React from \"react\";\n\nconst AppButton = ({ title, onClick }) => (\n  <button onClick={onClick}>{title}</button>\n);\n\nexport default AppButton;\n","import React from \"react\";\n\nconst AppImage = ({ src }) => <img src={src} width=\"250px\" alt=\"\" />;\n\nexport default AppImage;\n","import React, { Component } from \"react\";\n\nimport AppCamera from \"./AppCamera\";\nimport AppButton from \"./AppButton\";\nimport AppImage from \"./AppImage\";\n\nclass App extends Component {\n  state = {\n    croppedPhoto: \"\",\n    timestamp: \"\",\n    videoRef: null,\n    rectWidth: 0,\n    rectHeight: 0,\n    rectX: 0,\n    rectY: 0\n  };\n\n  onCameraStart = setTimeout(() => {\n    const video = document.querySelector(\"video\");\n    const videoOffsetWidth = video.offsetWidth;\n    const videoOffsetHeight = video.offsetHeight;\n\n    const rate = 3.5 / 4.5;\n    const rectHeight = videoOffsetHeight * rate;\n    const rectWidth = rectHeight * rate;\n    const rectX = (videoOffsetWidth - rectWidth) / 2;\n    const rectY = (videoOffsetHeight - rectHeight) / 2;\n\n    const canvasOverlay = document.getElementById(\"canvas-overlay\");\n    canvasOverlay.width = videoOffsetWidth;\n    canvasOverlay.height = videoOffsetHeight;\n    const ctx = canvasOverlay.getContext(\"2d\");\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"#fff\";\n    ctx.strokeRect(rectX, rectY, rectWidth, rectHeight);\n\n    this.setState({\n      videoRef: video,\n      rectWidth,\n      rectHeight,\n      rectX,\n      rectY\n    });\n  }, 1500);\n\n  cropImage = (img, newWidth, newHeight, startX, startY) => {\n    var tnCanvas = document.createElement(\"canvas\");\n    var tnCanvasContext = tnCanvas.getContext(\"2d\");\n    tnCanvas.width = newWidth;\n    tnCanvas.height = newHeight;\n\n    var bufferCanvas = document.createElement(\"canvas\");\n    var bufferContext = bufferCanvas.getContext(\"2d\");\n    bufferCanvas.width = img.width;\n    bufferCanvas.height = img.height;\n    bufferContext.drawImage(img, 0, 0, img.width, img.height);\n\n    tnCanvasContext.drawImage(\n      bufferCanvas,\n      startX,\n      startY,\n      newWidth,\n      newHeight,\n      0,\n      0,\n      newWidth,\n      newHeight\n    );\n\n    return tnCanvas.toDataURL();\n  };\n\n  onTakePhoto = dataUri => {\n    const { videoRef, rectWidth, rectHeight, rectX, rectY } = this.state;\n\n    const img = new Image();\n    img.src = dataUri;\n    img.width = videoRef.offsetWidth;\n    img.height = videoRef.offsetHeight;\n    img.onload = () => {\n      const croppedPhoto = this.cropImage(\n        img,\n        rectWidth,\n        rectHeight,\n        rectX,\n        rectY\n      );\n      this.setState({ croppedPhoto: croppedPhoto, timestamp: Date.now() });\n    };\n  };\n\n  openInNewTab = data => () => {\n    const newWindow = window.open();\n    newWindow.document.write(`<img src=\"${data}\">`);\n  };\n\n  render() {\n    const { croppedPhoto, timestamp } = this.state;\n\n    return (\n      <div className=\"app\">\n        <h1 className=\"app-title\">Take Photo From Document</h1>\n        {!croppedPhoto && (\n          <AppCamera\n            onTakePhoto={this.onTakePhoto}\n            onCameraStart={this.onCameraStart}\n          />\n        )}\n        {croppedPhoto && (\n          <React.Fragment>\n            <div className=\"images-wrapper\">\n              <div\n                className=\"images-wrapper__item\"\n                style={{ marginRight: \"15px\" }}\n              >\n                <AppImage src={croppedPhoto} />\n                <AppButton\n                  title={`cropped_${timestamp}`}\n                  onClick={this.openInNewTab(croppedPhoto)}\n                />\n              </div>\n            </div>\n          </React.Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}